# AvitoTestTask

## База данных

Для задания была разработна база данных.

![alt](https://i.imgur.com/V9HOOco.png)

## Запуск и остановка приложения

Для запуска приложения:

```
$ make run
```

Для остановки приложения:
```
$ make stop
```

## Файлы

В директории ```/sql``` находятся sql файлы создания и удаления дб.

В директории ```/docks``` находятся .json файлы, которые необходимо импортировать в postman.

## Получение всех сегментов

- **Метод**: GET
- **Путь**: `/slug`
- **Обработчик**: `handler.GetSlugs`

## Получение сегмента по ID

- **Метод**: GET
- **Путь**: `/slug/{id}`
- **Обработчик**: `handler.GetSlug`

## Удаление сегмента

- **Метод**: DELETE
- **Путь**: `/slug`
- **Обработчик**: `handler.DeleteSlug`

## Добавление сегмента

- **Метод**: POST
- **Путь**: `/slug`
- **Обработчик**: `handler.AddSlug`
- **Тело запроса**: JSON объект с данными сегмента

### Подмаршрут: User

#### Получение всех пользователей

- **Метод**: GET
- **Путь**: `/slug/user`
- **Обработчик**: `handler.GetUsers`

#### Получение сегментов пользователя по ID

- **Метод**: GET
- **Путь**: `/slug/user/{id}`
- **Обработчик**: `handler.GetUserSlugs`

#### Получение архивных сегментов пользователя

- **Метод**: GET
- **Путь**: `/slug/user/{id}/archive?year='year'&month='month'`
- **Обработчик**: `handler.GetUserArchive`


#### Добавление пользователей

- **Метод**: POST
- **Путь**: `/slug/user`
- **Обработчик**: `handler.AddUsers`
- **Тело запроса**: JSON объект с данными пользователя

#### Добавление сегментов пользователю по ID

- **Метод**: POST
- **Путь**: `/slug/user/{id}`
- **Обработчик**: `handler.AddUserSlugs`
- **Тело запроса**: JSON объект с данными сегмента
